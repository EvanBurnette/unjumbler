(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x=Symbol("Comlink.proxy"),F=Symbol("Comlink.endpoint"),v=Symbol("Comlink.releaseProxy"),P=Symbol("Comlink.finalizer"),w=Symbol("Comlink.thrown"),T=e=>typeof e=="object"&&e!==null||typeof e=="function",G={canHandle:e=>T(e)&&e[x],serialize(e){const{port1:t,port2:r}=new MessageChannel;return S(e,t),[r,[r]]},deserialize(e){return e.start(),z(e)}},$={canHandle:e=>T(e)&&w in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},W=new Map([["proxy",G],["throw",$]]);function q(e,t){for(const r of e)if(t===r||r==="*"||r instanceof RegExp&&r.test(t))return!0;return!1}function S(e,t=globalThis,r=["*"]){t.addEventListener("message",function s(n){if(!n||!n.data)return;if(!q(r,n.origin)){console.warn(`Invalid origin '${n.origin}' for comlink proxy`);return}const{id:f,type:o,path:i}=Object.assign({path:[]},n.data),c=(n.data.argumentList||[]).map(y);let a;try{const u=i.slice(0,-1).reduce((l,b)=>l[b],e),g=i.reduce((l,b)=>l[b],e);switch(o){case"GET":a=g;break;case"SET":u[i.slice(-1)[0]]=y(n.data.value),a=!0;break;case"APPLY":a=g.apply(u,c);break;case"CONSTRUCT":{const l=new g(...c);a=Q(l)}break;case"ENDPOINT":{const{port1:l,port2:b}=new MessageChannel;S(e,b),a=K(l,[l])}break;case"RELEASE":a=void 0;break;default:return}}catch(u){a={value:u,[w]:0}}Promise.resolve(a).catch(u=>({value:u,[w]:0})).then(u=>{const[g,l]=M(u);t.postMessage(Object.assign(Object.assign({},g),{id:f}),l),o==="RELEASE"&&(t.removeEventListener("message",s),_(t),P in e&&typeof e[P]=="function"&&e[P]())}).catch(u=>{const[g,l]=M({value:new TypeError("Unserializable return value"),[w]:0});t.postMessage(Object.assign(Object.assign({},g),{id:f}),l)})}),t.start&&t.start()}function Y(e){return e.constructor.name==="MessagePort"}function _(e){Y(e)&&e.close()}function z(e,t){return C(e,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function N(e){return d(e,{type:"RELEASE"}).then(()=>{_(e)})}const k=new WeakMap,E="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(k.get(e)||0)-1;k.set(e,t),t===0&&N(e)});function X(e,t){const r=(k.get(t)||0)+1;k.set(t,r),E&&E.register(e,t,e)}function B(e){E&&E.unregister(e)}function C(e,t=[],r=function(){}){let s=!1;const n=new Proxy(r,{get(f,o){if(p(s),o===v)return()=>{B(n),N(e),s=!0};if(o==="then"){if(t.length===0)return{then:()=>n};const i=d(e,{type:"GET",path:t.map(c=>c.toString())}).then(y);return i.then.bind(i)}return C(e,[...t,o])},set(f,o,i){p(s);const[c,a]=M(i);return d(e,{type:"SET",path:[...t,o].map(u=>u.toString()),value:c},a).then(y)},apply(f,o,i){p(s);const c=t[t.length-1];if(c===F)return d(e,{type:"ENDPOINT"}).then(y);if(c==="bind")return C(e,t.slice(0,-1));const[a,u]=j(i);return d(e,{type:"APPLY",path:t.map(g=>g.toString()),argumentList:a},u).then(y)},construct(f,o){p(s);const[i,c]=j(o);return d(e,{type:"CONSTRUCT",path:t.map(a=>a.toString()),argumentList:i},c).then(y)}});return X(n,e),n}function J(e){return Array.prototype.concat.apply([],e)}function j(e){const t=e.map(M);return[t.map(r=>r[0]),J(t.map(r=>r[1]))]}const D=new WeakMap;function K(e,t){return D.set(e,t),e}function Q(e){return Object.assign(e,{[x]:!0})}function M(e){for(const[t,r]of W)if(r.canHandle(e)){const[s,n]=r.serialize(e);return[{type:"HANDLER",name:t,value:s},n]}return[{type:"RAW",value:e},D.get(e)||[]]}function y(e){switch(e.type){case"HANDLER":return W.get(e.name).deserialize(e.value);case"RAW":return e.value}}function d(e,t,r){return new Promise(s=>{const n=Z();e.addEventListener("message",function f(o){!o.data||!o.data.id||o.data.id!==n||(e.removeEventListener("message",f),s(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:n},t),r)})}function Z(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let O=0;const H=(e,t,r,s,n=0,f="")=>{if(n>=s.length)return r(f,O),O;e:for(const{word:o,counts:i}of s[n]){const c=structuredClone(e);for(const a in i)if(c[a]-=i[a],c[a]<0)continue e;H(c,t,r,s,n+1,`${f} ${o}`)}return O};function I(){return Worker!=null}const ee=!I(),te=(e,t)=>{for(const r in e)if(!(r in t)||e[r]!==t[r])return!1;return Object.keys(e).length==Object.keys(t).length},re=(e,t)=>{for(const r in e)if(e[r]>t[r])return!1;return!0};let U=[],R=[];const ne=e=>{U=e.split(`
`),se()},V=e=>{const t={};for(const r of e)t[r]?t[r]++:t[r]=1;return t},se=()=>{R=U.map(e=>({word:e,counts:V(e)}))},oe=e=>{const t=V(e);return R.filter(r=>te(r.counts,t)).map(r=>r.word)},ae=navigator.hardwareConcurrency;let m=navigator.maxTouchPoints>0?2:Math.max(2,Math.floor(ae/2));const ie=e=>{m=e},ce=()=>m,A=[];for(let e=0;e<m;e++)try{const t=z(new Worker(new URL(""+new URL("subWorker-f8a47332.js",self.location.href).href,self.location)));t.setWorkerId(e),A.push(t)}catch(t){console.error(t)}let h,L;var ue=Object.freeze({__proto__:null,getNumSubworkers:ce,getPhrases:e=>{m>h[0].length||ee?(H(L,[],e,h),console.debug("fallback")):A.forEach((t,r)=>{const s={start:r*Math.floor(h[0].length/m),end:(r+1)*Math.floor(h[0].length/m)};r===A.length-1&&(s.end=h[0].length+1);const n=structuredClone(h);n[0]=n[0].slice(s.start,s.end),t._getPhrases(L,[],e,n)})},getSubworkersAllowed:I,getWords:oe,setConcurrency:ie,setDictionary:ne,setupData:(e,t)=>{L=e,new Set(Object.entries(e).filter(([r,s])=>s>0).map(([r,s])=>r)),h=t.map(r=>R.filter(({word:s,counts:n})=>r!==s.length?!1:re(n,e)))}});S(ue)})();
